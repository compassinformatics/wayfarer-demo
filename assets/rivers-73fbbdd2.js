import"./bootstrap.min-e8f71853.js";import{c as w,T as m,X as S}from"./utils-22320b09.js";import{V as y,a as p,b as f,S as d,C as b,F as x,D as k,p as F,c as C,d as v,G as I,k as h,f as L,M as G,g as j,h as D,B as E,i as T,t as V}from"./networklayer-d214f836.js";import{u as N,c as P}from"./table-bdeb1a95.js";import{S as R}from"./Select-b8e37289.js";let c;function A(){r.getSource().clear()}function O(t,n){return new f({stroke:new d({color:"#ff1dce",width:2}),image:new b({radius:12,fill:new x({color:"#ff1dce"})})})}const r=new y({source:new p,style:O});function z(t,n,o){let e=C([n]);const s=t.getView().getResolution()*3;return e=v(e,s),o.getSource().getFeaturesInExtent(e).length>0}function J(t){if(Object.keys(t).length!==0){r.getSource().clear();const o=new I().readFeatures(t);r.getSource().addFeatures(o),N(o,c,r)}}function M(t,n,o){const e=o.getGeometry().getCoordinates(),s=o.getGeometry().getCoordinates(),a=t.getSource().getClosestFeatureToCoordinate(s);if(a){const i=a.getId(),u=JSON.stringify({x:e[0],y:e[1],edge_id:i});w("solve_downstream",u,J)}}function X(t,n){t.addLayer(r);const o=new k({source:r.getSource(),type:"Point",condition:function(e){return F(e)===!0?z(t,e.coordinate,n):!1}});return c=new R({layers:[r],style:function(e,s){return new f({stroke:new d({color:"#00ffff",width:2})})}}),c.setActive(!1),t.addInteraction(c),r.getSource().on("addfeature",function(e){e.feature.getGeometry().getType()==="Point"&&M(n,r,e.feature)}),o}function _(){const n=h([-10.46009,52.139686,-9.069436,52.562382],"EPSG:4326","EPSG:3857"),o="./data/rivers.json";P();const s=L(o,null,"#6495ED"),a=new G({target:"map",layers:[new m({source:new S({url:"http://stamen-tiles-a.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"}),opacity:.7}),s],view:new j({center:D(n),extent:n,zoom:10})}),i=[{text:"Hide/Show Labels",callback:V},{text:"Clear Results",callback:A},"-"],u=new E({width:170,defaultItems:!0,items:i});a.addControl(u);const l=X(a,s);a.addInteraction(l),l.setActive(!0);const g=new T({source:s.getSource()});a.addInteraction(g)}_();
//# sourceMappingURL=rivers-73fbbdd2.js.map
