import"./bootstrap.min-e8f71853.js";import{an as d,ao as H,v as J,ap as Z,a2 as _,aq as z,ar as Q,$ as ee,as as te,at as C,au as S,av as b,N as ie,u as X,aw as re,ax as ne,ay as se,W as oe,az as le,m,n as ae,aA as F,aB as ce,am as ue,H as he,a5 as y,E as de,V as ge,a as fe,T as k,F as A,S as j,b as U,C as _e,D as me,p as Te,c as xe,d as Fe,G as I,e as we,k as Ce,f as Se,M as ye,g as Ee,h as pe,B as Re,i as Pe,t as ze}from"./networklayer-42fddc28.js";import{a as je,c as x,I as be,R as Ge,T as Le}from"./Tile-331d8e26.js";import{g as ke,c as Ae,a as Oe}from"./networkeditor-07b53590.js";import{u as Ze,c as Xe}from"./table-ee83c228.js";import{S as Ue}from"./Select-44930704.js";class Ie{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const i=this.entries_[e];return d(i!==void 0,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const t=this.entries_[e];return d(t!==void 0,15),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.key_;return e}getValues(){const e=new Array(this.count_);let t=0,i;for(i=this.newest_;i;i=i.older)e[t++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){if(this.containsKey(e))return this.entries_[e].value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){d(!(e in this.entries_),16);const i={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}const Me=Ie;function O(s,e,t,i){return i!==void 0?(i[0]=s,i[1]=e,i[2]=t,i):[s,e,t]}function p(s,e,t){return s+"/"+e+"/"+t}function M(s){return p(s[0],s[1],s[2])}function Ye(s){return s.split("/").map(Number)}function ve(s){return(s[1]<<s[0])+s[2]}function De(s,e){const t=s[0],i=s[1],r=s[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const n=e.getFullTileRange(t);return n?n.containsXY(i,r):!0}class Ke extends Me{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=Ye(e)[0];this.forEach(function(r){r.tileCoord[0]!==i&&(this.remove(M(r.tileCoord)),r.release())}.bind(this))}}const Y=Ke,P={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},Ne=[0,0,0],f=5;class qe{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,d(H(this.resolutions_,function(r,n){return n-r},!0),17);let t;if(!e.origins){for(let r=0,n=this.resolutions_.length-1;r<n;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,d(this.origins_.length==this.resolutions_.length,20));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=J(i)),d(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,d(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Z,d(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map(function(r,n){const o=new je(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){const l=this.getTileRangeForExtentAndZ(i,n);o.minX=Math.max(l.minX,o.minX),o.maxX=Math.min(l.maxX,o.maxX),o.minY=Math.max(l.minY,o.minY),o.maxY=Math.min(l.maxY,o.maxY)}return o},this):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,t,i){const r=this.getTileRangeForExtentAndZ(e,t);for(let n=r.minX,o=r.maxX;n<=o;++n)for(let l=r.minY,c=r.maxY;l<=c;++l)i([t,n,l])}forEachTileCoordParentTileRange(e,t,i,r){let n,o,l,c=null,a=e[0]-1;for(this.zoomFactor_===2?(o=e[1],l=e[2]):c=this.getTileCoordExtent(e,r);a>=this.minZoom;){if(this.zoomFactor_===2?(o=Math.floor(o/2),l=Math.floor(l/2),n=x(o,o,l,l,i)):n=this.getTileRangeForExtentAndZ(c,a,i),t(a,n))return!0;--a}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const n=e[1]*2,o=e[2]*2;return x(n,n+1,o,o+1,t)}const r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,i){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],n=e[1],o=e[2];if(t===r)return x(n,o,n,o,i);if(this.zoomFactor_){const c=Math.pow(this.zoomFactor_,t-r),a=Math.floor(n*c),u=Math.floor(o*c);if(t<r)return x(a,a,u,u,i);const h=Math.floor(c*(n+1))-1,w=Math.floor(c*(o+1))-1;return x(a,h,u,w,i)}const l=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(l,t,i)}getTileRangeExtent(e,t,i){const r=this.getOrigin(e),n=this.getResolution(e),o=_(this.getTileSize(e),this.tmpSize_),l=r[0]+t.minX*o[0]*n,c=r[0]+(t.maxX+1)*o[0]*n,a=r[1]+t.minY*o[1]*n,u=r[1]+(t.maxY+1)*o[1]*n;return z(l,a,c,u,i)}getTileRangeForExtentAndZ(e,t,i){const r=Ne;this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,r);const n=r[1],o=r[2];return this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,r),x(n,r[1],o,r[2],i)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=_(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*i,t[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,t){const i=this.getOrigin(e[0]),r=this.getResolution(e[0]),n=_(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*n[0]*r,l=i[1]-(e[2]+1)*n[1]*r,c=o+n[0]*r,a=l+n[1]*r;return z(o,l,c,a,t)}getTileCoordForCoordAndResolution(e,t,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,i)}getTileCoordForXYAndResolution_(e,t,i,r,n){const o=this.getZForResolution(i),l=i/this.getResolution(o),c=this.getOrigin(o),a=_(this.getTileSize(o),this.tmpSize_);let u=l*(e-c[0])/i/a[0],h=l*(c[1]-t)/i/a[1];return r?(u=C(u,f)-1,h=C(h,f)-1):(u=S(u,f),h=S(h,f)),O(o,u,h,n)}getTileCoordForXYAndZ_(e,t,i,r,n){const o=this.getOrigin(i),l=this.getResolution(i),c=_(this.getTileSize(i),this.tmpSize_);let a=(e-o[0])/l/c[0],u=(o[1]-t)/l/c[1];return r?(a=C(a,f)-1,u=C(u,f)-1):(a=S(a,f),u=S(u,f)),O(i,a,u,n)}getTileCoordForCoordAndZ(e,t,i){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const i=Q(this.resolutions_,e,t||0);return ee(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return te(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,i=new Array(t);for(let r=this.minZoom;r<t;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}}const v=qe;function D(s){let e=s.getDefaultTileGrid();return e||(e=Be(s),s.setDefaultTileGrid(e)),e}function $e(s,e,t){const i=e[0],r=s.getTileCoordCenter(e),n=G(t);if(oe(n,r))return e;{const o=X(n),l=Math.ceil((n[0]-r[0])/o);return r[0]+=o*l,s.getTileCoordForCoordAndZ(r,i)}}function We(s,e,t,i){i=i!==void 0?i:"top-left";const r=K(s,e,t);return new v({extent:s,origin:ne(s,i),resolutions:r,tileSize:t})}function Ve(s){const e=s||{},t=e.extent||b("EPSG:3857").getExtent(),i={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:K(t,e.maxZoom,e.tileSize,e.maxResolution)};return new v(i)}function K(s,e,t,i){e=e!==void 0?e:se,t=_(t!==void 0?t:Z);const r=ie(s),n=X(s);i=i>0?i:Math.max(n/t[0],r/t[1]);const o=e+1,l=new Array(o);for(let c=0;c<o;++c)l[c]=i/Math.pow(2,c);return l}function Be(s,e,t,i){const r=G(s);return We(r,e,t,i)}function G(s){s=b(s);let e=s.getExtent();if(!e){const t=180*re.degrees/s.getMetersPerUnit();e=z(-t,-t,t,t)}return e}class He extends le{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&_(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Y(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const i=this.getTileCacheForProjection(e);i&&i.expireCache(t)}forEachLoadedTile(e,t,i,r){const n=this.getTileCacheForProjection(e);if(!n)return!1;let o=!0,l,c,a;for(let u=i.minX;u<=i.maxX;++u)for(let h=i.minY;h<=i.maxY;++h)c=p(t,u,h),a=!1,n.containsKey(c)&&(l=n.get(c),a=l.getState()===m.LOADED,a&&(a=r(l)!==!1)),a||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(){return this.tileGrid?this.tileGrid.getResolutions():null}getTile(e,t,i,r,n){return ae()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:D(e)}getTileCacheForProjection(e){const t=this.getProjection();return d(t===null||F(t,e),68),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,i){const r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(t),o=_(r.getTileSize(e),this.tmpSize);return n==1?o:ce(o,n,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const i=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=$e(i,e,t)),De(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const i=this.getTileCacheForProjection(t);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,t,i,r){}}class Je extends ue{constructor(e,t){super(e),this.tile=t}}const Qe=He;function et(s,e){const t=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,n=/\{-y\}/g;return function(o,l,c){if(o)return s.replace(t,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(n,function(){const a=o[0],u=e.getFullTileRange(a);return d(u,55),(u.getHeight()-o[2]-1).toString()})}}function tt(s,e){const t=s.length,i=new Array(t);for(let r=0;r<t;++r)i[r]=et(s[r],e);return it(i)}function it(s){return s.length===1?s[0]:function(e,t,i){if(e){const r=ve(e),n=he(r,s.length);return s[n](e,t,i)}else return}}function rt(s){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(s);if(t){const i=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let n;for(n=i;n<=r;++n)e.push(s.replace(t[0],String.fromCharCode(n)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(s),t){const i=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=i;r++)e.push(s.replace(t[0],r.toString()));return e}return e.push(s),e}class L extends Qe{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===L.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,i=y(t),r=t.getState();let n;r==m.LOADING?(this.tileLoadingKeys_[i]=!0,n=P.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],n=r==m.ERROR?P.TILELOADERROR:r==m.LOADED?P.TILELOADEND:void 0),n!=null&&this.dispatchEvent(new Je(n,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=rt(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(tt(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,i){}useTile(e,t,i){const r=p(e,t,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}const nt=L;class st extends nt{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:ot,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:be,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?t:{});for(const r in this.tileCacheForProjection){const n=this.tileCacheForProjection[r];n.expireCache(n==i?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!F(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!F(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||F(t,e)))return this.tileGrid;{const i=y(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=D(e)),this.tileGridForProjection[i]}}getTileCacheForProjection(e){const t=this.getProjection();if(!t||F(t,e))return this.tileCache;{const i=y(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Y(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}}createTile_(e,t,i,r,n,o){const l=[e,t,i],c=this.getTileCoordForTileUrlFunction(l,n),a=c?this.tileUrlFunction(c,r,n):void 0,u=new this.tileClass(l,a!==void 0?m.IDLE:m.EMPTY,a!==void 0?a:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(de.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,i,r,n){const o=this.getProjection();if(!o||!n||F(o,n))return this.getTileInternal(e,t,i,r,o||n);{const l=this.getTileCacheForProjection(n),c=[e,t,i];let a;const u=M(c);l.containsKey(u)&&(a=l.get(u));const h=this.getKey();if(a&&a.key==h)return a;{const w=this.getTileGridForProjection(o),R=this.getTileGridForProjection(n),q=this.getTileCoordForTileUrlFunction(c,n),T=new Ge(o,w,n,R,c,q,this.getTilePixelRatio(r),this.getGutter(),function($,W,V,B){return this.getTileInternal($,W,V,B,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return T.key=h,a?(T.interimTile=a,T.refreshInterimChain(),l.replace(u,T)):l.set(u,T),T}}}getTileInternal(e,t,i,r,n){let o=null;const l=p(e,t,i),c=this.getKey();if(!this.tileCache.containsKey(l))o=this.createTile_(e,t,i,r,n,c),this.tileCache.set(l,o);else if(o=this.tileCache.get(l),o.key!=c){const a=o;o=this.createTile_(e,t,i,r,n,c),a.getState()==m.IDLE?o.interimTile=a.interimTile:o.interimTile=a,o.refreshInterimChain(),this.tileCache.replace(l,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const i=b(e);if(i){const r=y(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function ot(s,e){s.getImage().src=e}const lt=st;class at extends lt{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:Ve({extent:G(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const ct=at,ut='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class ht extends ct{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[ut];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const dt=ht;let E;function gt(){g.getSource().clear()}function ft(s,e){let t;return s.getGeometry().getType()==="LineString"?t=new k({font:"10px Open Sans",fill:new A({color:"#000"}),stroke:new j({color:"#fff",width:3}),offsetX:0,offsetY:-12,textAlign:"center",textBaseline:"middle"}):t=new k({text:s.get("index").toString(),font:"14px Open Sans",offsetX:0,offsetY:0,textAlign:"center",textBaseline:"middle"}),new U({stroke:new j({color:"#ff1dce",width:2}),text:t,image:new _e({radius:12,fill:new A({color:"#ff1dce"})})})}const g=new ge({source:new fe,style:ft});function _t(){g.getSource().forEachFeature(function(s){s.getGeometry().getType()==="LineString"&&g.getSource().removeFeature(s)})}function mt(s,e,t){let i=xe([e]);const r=s.getView().getResolution()*3;return i=Fe(i,r),t.getSource().getFeaturesInExtent(i).length>0}function Tt(s){if(Object.keys(s).length!==0){_t();const t=new I().readFeatures(s);g.getSource().addFeatures(t),Ze(t,E,g)}}function xt(s,e,t){const i=s.feature,r=i.getGeometry().getCoordinates(),n=e.getSource().getClosestFeatureToCoordinate(r);if(n){const o=N().length,l=n.getId();return i.set("edgeId",l),i.set("index",o),!0}return!1}function N(){const s=[];return g.getSource().forEachFeature(function(e){e.getGeometry().getType()==="Point"&&s.push(e)}),s}function Ft(s){const e=N();if(e.length>=2){const t=new I,i=JSON.stringify({points:t.writeFeatures(e),edits:ke()});we("solve_shortest_path_from_points",i,Tt)}}function wt(s,e){s.addLayer(g);const t=new me({source:g.getSource(),type:"Point",condition:function(i){return Te(i)===!0?mt(s,i.coordinate,e):!1}});return g.getSource().on("addfeature",function(i){i.feature.getGeometry().getType()==="Point"&&Ft()}),E=new Ue({layers:[g],style:function(i,r){return new U({stroke:new j({color:"#00ffff",width:2})})}}),E.setActive(!1),s.addInteraction(E),t.on("drawend",function(i){xt(i,e)}),t}function Ct(){const s="./data/stbrice.json",t=Ce([2.3314107610246633,48.988440397479536,2.4050093789098863,49.01280894618151],"EPSG:4326","EPSG:3857"),r=Se(s,null,"rgba(255, 255, 255, 0.0)");Xe();const n=new ye({target:"map",layers:[new Le({source:new dt}),r],view:new Ee({center:pe(t),extent:t,zoom:16})});function o(){[u,a].forEach(function(R){R.setActive(!1)})}const l=[{text:"Hide/Show Labels",callback:ze},"-",{text:"Activate Route Solver",callback:function(){o(),u.setActive(!0)}},{text:"Clear Routes",callback:gt},"-",{text:"Activate Network Editor",callback:function(){o(),a.setActive(!0)}},{text:"Clear Network Edits",callback:Oe},"-"],c=new Re({width:170,defaultItems:!0,items:l});n.addControl(c);const a=Ae(n,r),u=wt(n,r);n.addInteraction(u),n.addInteraction(a),o(),u.setActive(!0);const h=new Pe({source:r.getSource()});n.addInteraction(h)}Ct();
//# sourceMappingURL=routes-35281d02.js.map
