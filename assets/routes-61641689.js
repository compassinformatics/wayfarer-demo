import"./bootstrap.min-e8f71853.js";import{V as h,a as k,T as g,F as w,S as d,b as m,C as F,D as E,p as T,c as v,d as I,G as S,k as L,f as O,M as A,g as C,h as N,B as j,i as G,t as P}from"./networklayer-d214f836.js";import{X as R,c as z,T as D}from"./utils-68ce0e25.js";import{g as X,c as M,a as V}from"./networkeditor-83b21484.js";import{u as _,c as B}from"./table-bdeb1a95.js";import{S as Z}from"./Select-b8e37289.js";const q='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Y extends R{constructor(e){e=e||{};let r;e.attributions!==void 0?r=e.attributions:r=[q];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",o=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:r,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:o,wrapX:e.wrapX,zDirection:e.zDirection})}}const J=Y;let u;function H(){s.getSource().clear()}function U(t,e){let r;return t.getGeometry().getType()==="LineString"?r=new g({font:"10px Open Sans",fill:new w({color:"#000"}),stroke:new d({color:"#fff",width:3}),offsetX:0,offsetY:-12,textAlign:"center",textBaseline:"middle"}):r=new g({text:t.get("index").toString(),font:"14px Open Sans",offsetX:0,offsetY:0,textAlign:"center",textBaseline:"middle"}),new m({stroke:new d({color:"#ff1dce",width:2}),text:r,image:new F({radius:12,fill:new w({color:"#ff1dce"})})})}const s=new h({source:new k,style:U});function $(){s.getSource().forEachFeature(function(t){t.getGeometry().getType()==="LineString"&&s.getSource().removeFeature(t)})}function K(t,e,r){let n=v([e]);const o=t.getView().getResolution()*3;return n=I(n,o),r.getSource().getFeaturesInExtent(n).length>0}function Q(t){if(Object.keys(t).length!==0){$();const r=new S().readFeatures(t);s.getSource().addFeatures(r),_(r,u,s)}}function W(t,e,r){const n=t.feature,o=n.getGeometry().getCoordinates(),a=e.getSource().getClosestFeatureToCoordinate(o);if(a){const c=p().length,l=a.getId();return n.set("edgeId",l),n.set("index",c),!0}return!1}function p(){const t=[];return s.getSource().forEachFeature(function(e){e.getGeometry().getType()==="Point"&&t.push(e)}),t}function ee(t){const e=p();if(e.length>=2){const r=new S,n=JSON.stringify({points:r.writeFeatures(e),edits:X()});z("solve_shortest_path_from_points",n,Q)}}function te(t,e){t.addLayer(s);const r=new E({source:s.getSource(),type:"Point",condition:function(n){return T(n)===!0?K(t,n.coordinate,e):!1}});return s.getSource().on("addfeature",function(n){n.feature.getGeometry().getType()==="Point"&&ee()}),u=new Z({layers:[s],style:function(n,o){return new m({stroke:new d({color:"#00ffff",width:2})})}}),u.setActive(!1),t.addInteraction(u),r.on("drawend",function(n){W(n,e)}),r}function re(){const t="./data/stbrice.json",r=L([2.3314107610246633,48.988440397479536,2.4050093789098863,49.01280894618151],"EPSG:4326","EPSG:3857"),o=O(t,null,"rgba(255, 255, 255, 0.0)");B();const a=new A({target:"map",layers:[new D({source:new J}),o],view:new C({center:N(r),extent:r,zoom:16})});function c(){[i,f].forEach(function(y){y.setActive(!1)})}const l=[{text:"Hide/Show Labels",callback:P},"-",{text:"Activate Route Solver",callback:function(){c(),i.setActive(!0)}},{text:"Clear Routes",callback:H},"-",{text:"Activate Network Editor",callback:function(){c(),f.setActive(!0)}},{text:"Clear Network Edits",callback:V},"-"],x=new j({width:170,defaultItems:!0,items:l});a.addControl(x);const f=M(a,o),i=te(a,o);a.addInteraction(i),a.addInteraction(f),c(),i.setActive(!0);const b=new G({source:o.getSource()});a.addInteraction(b)}re();
//# sourceMappingURL=routes-61641689.js.map
