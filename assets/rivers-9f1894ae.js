import"./bootstrap.min-e8f71853.js";import{T as w}from"./Tile-331d8e26.js";import{V as m,a as S,b as f,S as d,C as y,F as p,D as b,p as x,c as k,d as F,e as C,G as v,k as I,f as L,M as h,g as G,h as j,B as D,i as E,t as T}from"./networklayer-42fddc28.js";import{u as V,c as N}from"./table-ee83c228.js";import{S as P}from"./Select-44930704.js";let c;function R(){n.getSource().clear()}function A(t,r){return new f({stroke:new d({color:"#ff1dce",width:2}),image:new y({radius:12,fill:new p({color:"#ff1dce"})})})}const n=new m({source:new S,style:A});function M(t,r,o){let e=k([r]);const a=t.getView().getResolution()*3;return e=F(e,a),o.getSource().getFeaturesInExtent(e).length>0}function O(t){if(Object.keys(t).length!==0){n.getSource().clear();const o=new v().readFeatures(t);n.getSource().addFeatures(o),V(o,c,n)}}function _(t,r,o){const e=o.getGeometry().getCoordinates(),a=o.getGeometry().getCoordinates(),s=t.getSource().getClosestFeatureToCoordinate(a);if(s){const i=s.getId(),u=JSON.stringify({x:e[0],y:e[1],edge_id:i});C("solve_downstream",u,O)}}function J(t,r){t.addLayer(n);const o=new b({source:n.getSource(),type:"Point",condition:function(e){return x(e)===!0?M(t,e.coordinate,r):!1}});return c=new P({layers:[n],style:function(e,a){return new f({stroke:new d({color:"#00ffff",width:2})})}}),c.setActive(!1),t.addInteraction(c),n.getSource().on("addfeature",function(e){e.feature.getGeometry().getType()==="Point"&&_(r,n,e.feature)}),o}function z(){const r=I([-10.46009,52.139686,-9.069436,52.562382],"EPSG:4326","EPSG:3857"),o="./data/rivers.json";N();const a=L(o,null,"#6495ED"),s=new h({target:"map",layers:[new w({source:new ol.source.StadiaMaps({layer:"stamen_toner",retina:!0}),opacity:.7}),a],view:new G({center:j(r),extent:r,zoom:10})}),i=[{text:"Hide/Show Labels",callback:T},{text:"Clear Results",callback:R},"-"],u=new D({width:170,defaultItems:!0,items:i});s.addControl(u);const l=J(s,a);s.addInteraction(l),l.setActive(!0);const g=new E({source:a.getSource()});s.addInteraction(g)}z();
//# sourceMappingURL=rivers-9f1894ae.js.map
