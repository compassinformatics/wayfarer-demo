import"./bootstrap.min-fc66521f.js";import{T as w}from"./OSM-f284ffe5.js";import{V as m,a as S,b as f,S as d,C as y,F as p,D as b,p as x,c as k,d as F,e as C,G as v,k as I,f as L,M as h,g as G,h as j,R as D,i as E,t as T}from"./networklayer-bc81f725.js";import{S as R}from"./StadiaMaps-de0a4281.js";import{u as V,c as N}from"./table-29786adc.js";import{S as P}from"./Select-2bf6977a.js";let c;function A(){n.getSource().clear()}function M(t,r){return new f({stroke:new d({color:"#ff1dce",width:2}),image:new y({radius:12,fill:new p({color:"#ff1dce"})})})}const n=new m({source:new S,style:M});function O(t,r,o){let e=k([r]);const a=t.getView().getResolution()*3;return e=F(e,a),o.getSource().getFeaturesInExtent(e).length>0}function _(t){if(Object.keys(t).length!==0){n.getSource().clear();const o=new v().readFeatures(t);n.getSource().addFeatures(o),V(o,c,n)}}function J(t,r,o){const e=o.getGeometry().getCoordinates(),a=o.getGeometry().getCoordinates(),s=t.getSource().getClosestFeatureToCoordinate(a);if(s){const i=s.getId(),u=JSON.stringify({x:e[0],y:e[1],edge_id:i});C("solve_downstream",u,_)}}function z(t,r){t.addLayer(n);const o=new b({source:n.getSource(),type:"Point",condition:function(e){return x(e)===!0?O(t,e.coordinate,r):!1}});return c=new P({layers:[n],style:function(e,a){return new f({stroke:new d({color:"#00ffff",width:2})})}}),c.setActive(!1),t.addInteraction(c),n.getSource().on("addfeature",function(e){e.feature.getGeometry().getType()==="Point"&&J(r,n,e.feature)}),o}function H(){const r=I([-10.46009,52.139686,-9.069436,52.562382],"EPSG:4326","EPSG:3857"),o="./data/rivers.json";N();const a=L(o,null,"#6495ED"),s=new h({target:"map",layers:[new w({source:new R({layer:"stamen_toner",retina:!0}),opacity:.7}),a],view:new G({center:j(r),extent:r,zoom:10})}),i=[{text:"Hide/Show Labels",callback:T},{text:"Clear Results",callback:A},"-"],u=new D({width:170,defaultItems:!0,items:i});s.addControl(u);const l=z(s,a);s.addInteraction(l),l.setActive(!0);const g=new E({source:a.getSource()});s.addInteraction(g)}H();
//# sourceMappingURL=rivers-d9047476.js.map
