import"./bootstrap.min-e8f71853.js";import{T as w,X as m}from"./XYZ-5f96f382.js";import{V as S,a as y,b as f,S as d,C as p,F as b,D as x,p as k,c as F,d as C,e as v,G as I,k as h,f as L,M as G,g as j,h as D,B as E,i as T,t as V}from"./networklayer-f7e04c8c.js";import{u as N,c as P}from"./table-abe94ce1.js";import{S as R}from"./Select-05d8d73d.js";let c;function A(){r.getSource().clear()}function O(t,n){return new f({stroke:new d({color:"#ff1dce",width:2}),image:new p({radius:12,fill:new b({color:"#ff1dce"})})})}const r=new S({source:new y,style:O});function z(t,n,o){let e=F([n]);const s=t.getView().getResolution()*3;return e=C(e,s),o.getSource().getFeaturesInExtent(e).length>0}function J(t){if(Object.keys(t).length!==0){r.getSource().clear();const o=new I().readFeatures(t);r.getSource().addFeatures(o),N(o,c,r)}}function M(t,n,o){const e=o.getGeometry().getCoordinates(),s=o.getGeometry().getCoordinates(),a=t.getSource().getClosestFeatureToCoordinate(s);if(a){const i=a.getId(),u=JSON.stringify({x:e[0],y:e[1],edge_id:i});v("solve_downstream",u,J)}}function X(t,n){t.addLayer(r);const o=new x({source:r.getSource(),type:"Point",condition:function(e){return k(e)===!0?z(t,e.coordinate,n):!1}});return c=new R({layers:[r],style:function(e,s){return new f({stroke:new d({color:"#00ffff",width:2})})}}),c.setActive(!1),t.addInteraction(c),r.getSource().on("addfeature",function(e){e.feature.getGeometry().getType()==="Point"&&M(n,r,e.feature)}),o}function _(){const n=h([-10.46009,52.139686,-9.069436,52.562382],"EPSG:4326","EPSG:3857"),o="./data/rivers.json";P();const s=L(o,null,"#6495ED"),a=new G({target:"map",layers:[new w({source:new m({url:"http://stamen-tiles-a.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"}),opacity:.7}),s],view:new j({center:D(n),extent:n,zoom:10})}),i=[{text:"Hide/Show Labels",callback:V},{text:"Clear Results",callback:A},"-"],u=new E({width:170,defaultItems:!0,items:i});a.addControl(u);const l=X(a,s);a.addInteraction(l),l.setActive(!0);const g=new T({source:s.getSource()});a.addInteraction(g)}_();
//# sourceMappingURL=rivers-930d6bd3.js.map
