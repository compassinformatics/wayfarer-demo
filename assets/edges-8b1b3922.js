import"./bootstrap.min-fc66521f.js";import{V as x,a as p,T as d,F as f,S as g,b,C as k,D as y,p as E,c as h,d as v,e as F,G as C,f as A,M as L,g as N,h as I,R as T,i as j,t as G}from"./networklayer-bc81f725.js";import{g as V,c as D,a as O}from"./networkeditor-92112fc0.js";import{c as _}from"./table-29786adc.js";let i=[];function B(){i=[],s.getSource().clear()}function J(e,n){let o;return e.getGeometry().getType()==="LineString"?o=new d({text:e.get("index").toString(),font:"10px Open Sans",fill:new f({color:"#000"}),stroke:new g({color:"#fff",width:3}),offsetX:0,offsetY:-12,textAlign:"center",textBaseline:"middle"}):o=new d({text:e.get("index").toString(),font:"14px Open Sans",offsetX:0,offsetY:0,textAlign:"center",textBaseline:"middle"}),new b({stroke:new g({color:"yellow",width:2}),text:o,image:new k({radius:12,fill:new f({color:"yellow"})})})}const s=new x({source:new p,style:J});function M(){s.getSource().forEachFeature(function(e){e.getGeometry().getType()==="LineString"&&s.getSource().removeFeature(e)})}function P(e,n,o){let t=h([n]);const r=e.getView().getResolution()*3;return t=v(t,r),o.getSource().getFeaturesInExtent(t).length>0}function R(e){M();const o=new C().readFeatures(e);s.getSource().addFeatures(o)}function X(e,n,o){const t=e.feature,r=t.getGeometry().getCoordinates(),a=n.getSource().getClosestFeatureToCoordinate(r);a&&(i.push(a.getId()),t.set("index",i.length));const c=JSON.stringify({path:i,edits:V()});i.length>1&&F("solve_shortest_path_from_edges",c,R)}function Y(e,n){e.addLayer(s);const o=new y({source:s.getSource(),type:"Point",condition:function(t){return E(t)===!0?P(e,t.coordinate,n):!1}});return o.on("drawend",function(t){X(t,n)}),o}function z(){const e="./data/dublin.json",n=[-700886.9046790214,7045529032412218e-9,-695548.0308066505,7048223495319679e-9],t=A(e,"#1a2b39");_();const r=new L({target:"map",layers:[t],view:new N({center:I(n),extent:n,zoom:16})}),a=[{text:"Hide/Show Labels",callback:G},"-",{text:"Activate Edge Solver",callback:function(){c(),l.setActive(!0)}},{text:"Clear Edges",callback:B},"-",{text:"Activate Network Editor",callback:function(){c(),u.setActive(!0)}},{text:"Clear Network Edits",callback:O},"-"];function c(){[l,u].forEach(function(m){m.setActive(!1)})}const w=new T({width:170,defaultItems:!0,items:a});r.addControl(w);const u=D(r,t),l=Y(r,t);r.addInteraction(l),r.addInteraction(u),c(),l.setActive(!0);const S=new j({source:t.getSource()});r.addInteraction(S)}z();
//# sourceMappingURL=edges-8b1b3922.js.map
